(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.jiboProgrammingChallenge = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var BOARD_PADDING_X = 2;
var BOARD_PADDING_Y = 2;
var class_tile_1 = require("./class_tile");
var Board = (function () {
    function Board(resources, stage, onClickCallback, size, x, y) {
        this.x = x;
        this.y = y;
        this.onClickCallback = onClickCallback;
        this.resources = resources;
        this.stage = stage;
        this.setSize(size);
    }
    Board.prototype.randomize = function () {
        for (var y = 0; y < this.size; ++y) {
            for (var x = 0; x < this.size; ++x) {
                this.tiles[y][x].randomizeArrowType();
            }
        }
    };
    Board.prototype.clearCoinMemory = function () {
        for (var y = 0; y < this.size; ++y) {
            for (var x = 0; x < this.size; ++x) {
                this.tiles[y][x].setHasCoinMemory(false);
            }
        }
    };
    Board.prototype.getX = function () { return this.x; };
    Board.prototype.getY = function () { return this.y; };
    Board.prototype.getSize = function () { return this.size; };
    Board.prototype.setPosition = function (x, y) {
        this.x = x;
        this.y = y;
        this.updateTilePositions();
    };
    Board.prototype.setSize = function (value) {
        // Remove old tiles
        for (var y = 0; y < this.size; ++y) {
            for (var x = 0; x < this.size; ++x) {
                this.tiles[y][x].destroy();
            }
        }
        // Set new size
        this.size = value;
        // Create tiles
        this.tiles = [];
        for (var y = 0; y < this.size; ++y) {
            this.tiles[y] = [];
            for (var x = 0; x < this.size; ++x) {
                var tileType = ((x + y) % 2);
                this.tiles[y][x] = new class_tile_1.Tile(this.resources, this.stage, tileType, 0, 0, this.onClickCallback);
            }
        }
        // Setup neighbors
        for (var y = 0; y < this.size; ++y) {
            for (var x = 0; x < this.size; ++x) {
                if (y > 0) {
                    this.tiles[y - 1][x].setNeighbor(2, this.tiles[y][x]);
                }
                if (x > 0) {
                    this.tiles[y][x - 1].setNeighbor(1, this.tiles[y][x]);
                }
                if (y < this.size - 1) {
                    this.tiles[y + 1][x].setNeighbor(0, this.tiles[y][x]);
                }
                if (x < this.size - 1) {
                    this.tiles[y][x + 1].setNeighbor(3, this.tiles[y][x]);
                }
            }
        }
        this.updateTilePositions();
    };
    Board.prototype.updateTilePositions = function () {
        for (var y = 0; y < this.size; ++y) {
            for (var x = 0; x < this.size; ++x) {
                var px = x * (64 + BOARD_PADDING_X) + this.x;
                var py = y * (64 + BOARD_PADDING_Y) + this.y;
                this.tiles[y][x].setPosition(px, py);
            }
        }
    };
    return Board;
}());
exports.Board = Board;
},{"./class_tile":2}],2:[function(require,module,exports){
"use strict";
var COIN_MEMORY_ALPHA = .35;
var Tile = (function () {
    function Tile(resources, stage, tileType, x, y, onClickCallback, arrowType) {
        if (arrowType === void 0) { arrowType = 0; }
        // static
        if (Tile.arrowTextures == null) {
            Tile.arrowTextures = [];
            Tile.arrowTextures[0] = resources.arrow_up.texture;
            Tile.arrowTextures[1] = resources.arrow_right.texture;
            Tile.arrowTextures[2] = resources.arrow_down.texture;
            Tile.arrowTextures[3] = resources.arrow_left.texture;
        }
        // instance
        // state
        this.x = x;
        this.y = y;
        this.arrowType = arrowType;
        this.neighbors = [null, null, null, null];
        this.hasCoinMemory = false;
        // tile
        this.tileSprite = new PIXI.Sprite(resources["tile_" + tileType].texture);
        stage.addChild(this.tileSprite);
        this.tileSprite.position.x = x;
        this.tileSprite.position.y = y;
        // arrow
        this.arrowSprite = new PIXI.Sprite(Tile.arrowTextures[arrowType]);
        this.tileSprite.addChild(this.arrowSprite);
        // Coin memory
        this.coinMemorySprite = new PIXI.Sprite(resources.coin.texture);
        this.tileSprite.addChild(this.coinMemorySprite);
        this.coinMemorySprite.alpha = COIN_MEMORY_ALPHA;
        this.coinMemorySprite.visible = false;
        // mouse
        this.tileSprite.interactive = true;
        this.tileSprite.buttonMode = true;
        this.tileSprite["tile"] = this;
        this.tileSprite.on('mouseup', onClickCallback);
    }
    Tile.prototype.destroy = function () {
        this.tileSprite.destroy();
        this.arrowSprite.destroy();
        this.coinMemorySprite.destroy();
    };
    Tile.prototype.getX = function () { return this.x; };
    Tile.prototype.getY = function () { return this.y; };
    Tile.prototype.getArrowType = function () { return this.arrowType; };
    Tile.prototype.getNeighbor = function (index) { return this.neighbors[index]; };
    Tile.prototype.getPointedNeighbor = function () { return this.neighbors[this.arrowType]; };
    Tile.prototype.getHasCoinMemory = function () { return this.hasCoinMemory; };
    Tile.prototype.setPosition = function (x, y) {
        this.x = x;
        this.y = y;
        this.tileSprite.position.x = x;
        this.tileSprite.position.y = y;
    };
    Tile.prototype.randomizeArrowType = function () {
        var type = Math.floor(Math.random() * 4);
        this.setArrowType(type);
    };
    Tile.prototype.setArrowType = function (value) {
        if (value < 0 || value > 3) {
            return;
        } // TODO: Error reporting
        this.arrowType = value;
        this.arrowSprite.texture = Tile.arrowTextures[value];
    };
    Tile.prototype.setNeighbor = function (index, neighbor) {
        if (index < 0 || index > 3) {
            return;
        } // TODO: Error reporting
        this.neighbors[index] = neighbor;
    };
    Tile.prototype.setHasCoinMemory = function (value) {
        this.hasCoinMemory = value;
        this.coinMemorySprite.visible = value;
    };
    return Tile;
}());
exports.Tile = Tile;
},{}],3:[function(require,module,exports){
"use strict";
var HELP_OFFSET_X = 10;
var HELP_OFFSET_Y = 10;
var BOARD_POSITION_X = 10;
var BOARD_POSITION_Y = 70;
var BOARD_INITIAL_SIZE = 10;
var FRAME_SPEED = 100;
/// <reference path="../typings/index.d.ts" />
var PIXI = require('pixi.js');
//import audio = require('pixi-sound');
var class_board_1 = require("./class_board");
// global vars
// system
var renderer = new PIXI.WebGLRenderer(3000, 3000);
var stage = new PIXI.Container();
// game constants
var coinAnimationFrames = [[0, 3, 4, 0], [0, 1, 2, 0], [0, 4, 3, 0], [0, 2, 1, 0]];
// game resources
var resources;
var fontStyle;
var explosionTextures;
var coinTextures;
var helpText;
// game state
var board;
var coin;
var explosion;
var frameTime = 0;
function initialize() {
    // System
    document.body.appendChild(renderer.view);
    // Textures
    PIXI.loader
        .add('tile_0', 'images/tile_blue.png')
        .add('tile_1', 'images/tile_green.png')
        .add('arrow_up', 'images/arrow_up.png')
        .add('arrow_right', 'images/arrow_right.png')
        .add('arrow_down', 'images/arrow_down.png')
        .add('arrow_left', 'images/arrow_left.png')
        .add('explosion_1', 'images/explosion_1.png')
        .add('explosion_2', 'images/explosion_2.png')
        .add('explosion_3', 'images/explosion_3.png')
        .add('explosion_4', 'images/explosion_4.png')
        .add('explosion_5', 'images/explosion_5.png')
        .add('coin', 'images/coin.png')
        .add('coin_horizontal1', 'images/coin_horizontal1.png')
        .add('coin_horizontal2', 'images/coin_horizontal2.png')
        .add('coin_vertical1', 'images/coin_vertical1.png')
        .add('coin_vertical2', 'images/coin_vertical2.png')
        .load(function (loader, newResources) {
        resources = newResources;
        setupTextureResources();
        setupUi();
        setupBoard();
        setupCoinAndExplosion();
        runMainLoop(0);
    });
}
function setupTextureResources() {
    explosionTextures = [];
    explosionTextures[0] = resources.explosion_1.texture;
    explosionTextures[1] = resources.explosion_2.texture;
    explosionTextures[2] = resources.explosion_3.texture;
    explosionTextures[3] = resources.explosion_4.texture;
    explosionTextures[4] = resources.explosion_5.texture;
    coinTextures = [];
    coinTextures[0] = resources.coin.texture;
    coinTextures[1] = resources.coin_horizontal1.texture;
    coinTextures[2] = resources.coin_horizontal2.texture;
    coinTextures[3] = resources.coin_vertical1.texture;
    coinTextures[4] = resources.coin_vertical2.texture;
}
function setupUi() {
    // Setup style
    fontStyle = new PIXI.TextStyle({
        fontFamily: 'Arial',
        fontSize: 20,
        fill: 'white'
    });
    // Setup help text
    helpText = new PIXI.Text("Click on a tile to drop a coin.\nSee quickly you can find the paths off of the board.", fontStyle);
    helpText.x = HELP_OFFSET_X;
    helpText.y = HELP_OFFSET_Y;
    stage.addChild(helpText);
}
function setupBoard() {
    board = new class_board_1.Board(resources, stage, onBoardClick, BOARD_INITIAL_SIZE, BOARD_POSITION_X, BOARD_POSITION_Y);
    board.randomize();
}
function setupCoinAndExplosion() {
    coin = new PIXI.Sprite(resources.coin.texture);
    coin.frame = -1;
    coin.visible = false;
    stage.addChild(coin);
    explosion = new PIXI.Sprite(explosionTextures[0]);
    explosion.frame = -1;
    explosion.visible = false;
    stage.addChild(explosion);
}
function onBoardClick(event) {
    var tile = event.target.tile;
    // remove the explosion (if still visible)
    explosion.visible = false;
    // place the coin
    coin.tile = tile;
    coin.position.x = tile.getX();
    coin.position.y = tile.getY();
    coin.direction = tile.getArrowType();
    coin.visible = true;
}
function runFrameLogic() {
    // animate coin
    if (coin.visible) {
        coin.frame += 1;
        if (coin.frame > 3) {
            coin.frame = 0;
        }
        coin.texture = coinTextures[coinAnimationFrames[coin.direction][coin.frame]];
    }
    // handle coin movement
    if (coin.visible && coin.frame == 2 && !explosion.visible) {
        var tile = coin.tile;
        // add to coin trail
        coin.tile.setHasCoinMemory(true);
        // Get new position
        var newTile = tile.getPointedNeighbor();
        // Check for trail loop
        if (newTile != null && newTile.getHasCoinMemory()) {
            explosion.visible = true;
        }
        // Remove coin (if applicable)
        if (!newTile || explosion.visible) {
            board.clearCoinMemory();
            if (!explosion.visible) {
                coin.visible = false;
                coin.frame = -1;
            }
        }
        else {
            coin.tile = newTile;
            coin.position.x = newTile.getX();
            coin.position.y = newTile.getY();
            coin.direction = newTile.getArrowType();
        }
    }
    // animate explosion
    if (explosion.visible) {
        ++explosion.frame;
        // special frames
        if (explosion.frame == 0) {
            explosion.position = coin.position;
        }
        else if (explosion.frame == 1) {
            coin.visible = false;
            coin.frame = -1;
        }
        // Draw or remove
        if (explosion.frame == 5) {
            explosion.visible = false;
            explosion.frame = -1;
        }
        else {
            explosion.texture = explosionTextures[explosion.frame];
        }
    }
}
function runMainLoop(timeStamp) {
    // call "runFrameLogic()" at FRAME_SPEED intervals
    if (timeStamp - frameTime > FRAME_SPEED) {
        frameTime = timeStamp;
        runFrameLogic();
    }
    // Render and loop
    renderer.render(stage);
    requestAnimationFrame(runMainLoop);
}
initialize();
},{"./class_board":1,"pixi.js":undefined}]},{},[3])(3)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL2NsYXNzX2JvYXJkLnRzIiwic3JjL2NsYXNzX3RpbGUudHMiLCJzcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQ0EsSUFBTSxlQUFlLEdBQUcsQ0FBQyxDQUFDO0FBQzFCLElBQU0sZUFBZSxHQUFHLENBQUMsQ0FBQztBQUUxQiwyQkFBcUIsY0FBYyxDQUFDLENBQUE7QUFFcEM7SUFDSSxlQUNRLFNBQVMsRUFBRSxLQUFzQixFQUNqQyxlQUFlLEVBQ2YsSUFBYSxFQUFFLENBQVUsRUFBRSxDQUFVO1FBQ3pDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDWCxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUN2QyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUMzQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFFTSx5QkFBUyxHQUFoQjtRQUNJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ2pDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO2dCQUNqQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDMUMsQ0FBQztRQUNMLENBQUM7SUFDTCxDQUFD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RSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQUMsQ0FBQztnQkFDbkUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQUMsQ0FBQztnQkFDbkUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFBQyxDQUFDO2dCQUM3RSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUFDLENBQUM7WUFDakYsQ0FBQztRQUNMLENBQUM7UUFDRCxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJ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bnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcclxuY29uc3QgQk9BUkRfUEFERElOR19YID0gMjtcclxuY29uc3QgQk9BUkRfUEFERElOR19ZID0gMjtcclxuXHJcbmltcG9ydCB7IFRpbGUgfSBmcm9tIFwiLi9jbGFzc190aWxlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQm9hcmQge1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICByZXNvdXJjZXMsIHN0YWdlIDogUElYSS5Db250YWluZXIsXHJcbiAgICAgICAgICAgIG9uQ2xpY2tDYWxsYmFjayxcclxuICAgICAgICAgICAgc2l6ZSA6IG51bWJlciwgeCA6IG51bWJlciwgeSA6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLm9uQ2xpY2tDYWxsYmFjayA9IG9uQ2xpY2tDYWxsYmFjaztcclxuICAgICAgICB0aGlzLnJlc291cmNlcyA9IHJlc291cmNlcztcclxuICAgICAgICB0aGlzLnN0YWdlID0gc3RhZ2U7XHJcbiAgICAgICAgdGhpcy5zZXRTaXplKHNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByYW5kb21pemUoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLnNpemU7ICsreSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuc2l6ZTsgKyt4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVzW3ldW3hdLnJhbmRvbWl6ZUFycm93VHlwZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGVhckNvaW5NZW1vcnkoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLnNpemU7ICsreSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuc2l6ZTsgKyt4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVzW3ldW3hdLnNldEhhc0NvaW5NZW1vcnkoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRYKCkgOiBudW1iZXIgeyByZXR1cm4gdGhpcy54OyB9XHJcbiAgICBwdWJsaWMgZ2V0WSgpIDogbnVtYmVyIHsgcmV0dXJuIHRoaXMueTsgfVxyXG4gICAgcHVibGljIGdldFNpemUoKSA6IG51bWJlciB7IHJldHVybiB0aGlzLnNpemU7IH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UG9zaXRpb24oeCA6IG51bWJlciwgeSA6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRpbGVQb3NpdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0U2l6ZSh2YWx1ZSA6IG51bWJlcikge1xyXG4gICAgICAgIC8vIFJlbW92ZSBvbGQgdGlsZXNcclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoaXMuc2l6ZTsgKyt5KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5zaXplOyArK3gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGlsZXNbeV1beF0uZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNldCBuZXcgc2l6ZVxyXG4gICAgICAgIHRoaXMuc2l6ZSA9IHZhbHVlO1xyXG4gICAgICAgIC8vIENyZWF0ZSB0aWxlc1xyXG4gICAgICAgIHRoaXMudGlsZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoaXMuc2l6ZTsgKyt5KSB7XHJcbiAgICAgICAgICAgIHRoaXMudGlsZXNbeV0gPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLnNpemU7ICsreCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpbGVUeXBlID0gKCh4ICsgeSkgJSAyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGlsZXNbeV1beF0gPSBuZXcgVGlsZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMsIHRoaXMuc3RhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVUeXBlLCAwLCAwLCB0aGlzLm9uQ2xpY2tDYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2V0dXAgbmVpZ2hib3JzXHJcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLnNpemU7ICsreSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuc2l6ZTsgKyt4KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA+IDApIHsgdGhpcy50aWxlc1t5LTFdW3hdLnNldE5laWdoYm9yKDIsIHRoaXMudGlsZXNbeV1beF0pOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA+IDApIHsgdGhpcy50aWxlc1t5XVt4LTFdLnNldE5laWdoYm9yKDEsIHRoaXMudGlsZXNbeV1beF0pOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA8IHRoaXMuc2l6ZS0xKSB7IHRoaXMudGlsZXNbeSsxXVt4XS5zZXROZWlnaGJvcigwLCB0aGlzLnRpbGVzW3ldW3hdKTsgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHggPCB0aGlzLnNpemUtMSkgeyB0aGlzLnRpbGVzW3ldW3grMV0uc2V0TmVpZ2hib3IoMywgdGhpcy50aWxlc1t5XVt4XSk7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZVRpbGVQb3NpdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVRpbGVQb3NpdGlvbnMoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLnNpemU7ICsreSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuc2l6ZTsgKyt4KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHggPSB4ICogKDY0ICsgQk9BUkRfUEFERElOR19YKSArIHRoaXMueDtcclxuICAgICAgICAgICAgICAgIHZhciBweSA9IHkgKiAoNjQgKyBCT0FSRF9QQURESU5HX1kpICsgdGhpcy55O1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aWxlc1t5XVt4XS5zZXRQb3NpdGlvbihweCxweSk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gc3RhdGVcclxuICAgIHByaXZhdGUgeCA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgeSA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc2l6ZSA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgb25DbGlja0NhbGxiYWNrO1xyXG4gICAgcHJpdmF0ZSB0aWxlcyA6IEFycmF5PEFycmF5PFRpbGU+PjtcclxuICAgIC8vIHN5c3RlbVxyXG4gICAgcHJpdmF0ZSByZXNvdXJjZXM7XHJcbiAgICBwcml2YXRlIHN0YWdlIDogUElYSS5Db250YWluZXI7XHJcbn0iLCJcclxuY29uc3QgQ09JTl9NRU1PUllfQUxQSEEgPSAuMzU7XHJcblxyXG5leHBvcnQgY2xhc3MgVGlsZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgcmVzb3VyY2VzLCBzdGFnZSA6IFBJWEkuQ29udGFpbmVyLFxyXG4gICAgICAgICAgICB0aWxlVHlwZSA6IG51bWJlciwgeCA6IG51bWJlciwgeSA6IG51bWJlcixcclxuICAgICAgICAgICAgb25DbGlja0NhbGxiYWNrLCBhcnJvd1R5cGU6bnVtYmVyID0gMCkge1xyXG4gICAgICAgIC8vIHN0YXRpY1xyXG4gICAgICAgIGlmIChUaWxlLmFycm93VGV4dHVyZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBUaWxlLmFycm93VGV4dHVyZXMgPSBbXTtcclxuICAgICAgICAgICAgVGlsZS5hcnJvd1RleHR1cmVzWzBdID0gcmVzb3VyY2VzLmFycm93X3VwLnRleHR1cmU7XHJcbiAgICAgICAgICAgIFRpbGUuYXJyb3dUZXh0dXJlc1sxXSA9IHJlc291cmNlcy5hcnJvd19yaWdodC50ZXh0dXJlO1xyXG4gICAgICAgICAgICBUaWxlLmFycm93VGV4dHVyZXNbMl0gPSByZXNvdXJjZXMuYXJyb3dfZG93bi50ZXh0dXJlO1xyXG4gICAgICAgICAgICBUaWxlLmFycm93VGV4dHVyZXNbM10gPSByZXNvdXJjZXMuYXJyb3dfbGVmdC50ZXh0dXJlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaW5zdGFuY2VcclxuICAgICAgICAgICAgLy8gc3RhdGVcclxuICAgICAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICAgICAgdGhpcy5hcnJvd1R5cGUgPSBhcnJvd1R5cGU7XHJcbiAgICAgICAgICAgIHRoaXMubmVpZ2hib3JzID0gW251bGwsIG51bGwsIG51bGwsIG51bGxdO1xyXG4gICAgICAgICAgICB0aGlzLmhhc0NvaW5NZW1vcnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gdGlsZVxyXG4gICAgICAgICAgICB0aGlzLnRpbGVTcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUocmVzb3VyY2VzW1widGlsZV9cIiArIHRpbGVUeXBlXS50ZXh0dXJlKTtcclxuICAgICAgICAgICAgc3RhZ2UuYWRkQ2hpbGQodGhpcy50aWxlU3ByaXRlKTtcclxuICAgICAgICAgICAgdGhpcy50aWxlU3ByaXRlLnBvc2l0aW9uLnggPSB4O1xyXG4gICAgICAgICAgICB0aGlzLnRpbGVTcHJpdGUucG9zaXRpb24ueSA9IHk7XHJcbiAgICAgICAgICAgIC8vIGFycm93XHJcbiAgICAgICAgICAgIHRoaXMuYXJyb3dTcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUoVGlsZS5hcnJvd1RleHR1cmVzW2Fycm93VHlwZV0pO1xyXG4gICAgICAgICAgICB0aGlzLnRpbGVTcHJpdGUuYWRkQ2hpbGQodGhpcy5hcnJvd1Nwcml0ZSk7XHJcbiAgICAgICAgICAgIC8vIENvaW4gbWVtb3J5XHJcbiAgICAgICAgICAgIHRoaXMuY29pbk1lbW9yeVNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZShyZXNvdXJjZXMuY29pbi50ZXh0dXJlKTtcclxuICAgICAgICAgICAgdGhpcy50aWxlU3ByaXRlLmFkZENoaWxkKHRoaXMuY29pbk1lbW9yeVNwcml0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29pbk1lbW9yeVNwcml0ZS5hbHBoYSA9IENPSU5fTUVNT1JZX0FMUEhBO1xyXG4gICAgICAgICAgICB0aGlzLmNvaW5NZW1vcnlTcHJpdGUudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBtb3VzZVxyXG4gICAgICAgICAgICB0aGlzLnRpbGVTcHJpdGUuaW50ZXJhY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnRpbGVTcHJpdGUuYnV0dG9uTW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudGlsZVNwcml0ZVtcInRpbGVcIl0gPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLnRpbGVTcHJpdGUub24oJ21vdXNldXAnLCBvbkNsaWNrQ2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMudGlsZVNwcml0ZS5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5hcnJvd1Nwcml0ZS5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5jb2luTWVtb3J5U3ByaXRlLmRlc3Ryb3koKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0WCgpIDogbnVtYmVyIHsgcmV0dXJuIHRoaXMueDsgfVxyXG4gICAgcHVibGljIGdldFkoKSA6IG51bWJlciB7IHJldHVybiB0aGlzLnk7IH1cclxuICAgIHB1YmxpYyBnZXRBcnJvd1R5cGUoKSA6IG51bWJlciB7IHJldHVybiB0aGlzLmFycm93VHlwZTsgfVxyXG4gICAgcHVibGljIGdldE5laWdoYm9yKGluZGV4IDogbnVtYmVyKSA6IFRpbGUgeyByZXR1cm4gdGhpcy5uZWlnaGJvcnNbaW5kZXhdOyB9XHJcbiAgICBwdWJsaWMgZ2V0UG9pbnRlZE5laWdoYm9yKCkgOiBUaWxlIHsgcmV0dXJuIHRoaXMubmVpZ2hib3JzW3RoaXMuYXJyb3dUeXBlXTsgfVxyXG4gICAgcHVibGljIGdldEhhc0NvaW5NZW1vcnkoKSA6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5oYXNDb2luTWVtb3J5OyB9XHJcblxyXG4gICAgcHVibGljIHNldFBvc2l0aW9uKHggOiBudW1iZXIsIHkgOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICAgICAgdGhpcy50aWxlU3ByaXRlLnBvc2l0aW9uLnggPSB4O1xyXG4gICAgICAgIHRoaXMudGlsZVNwcml0ZS5wb3NpdGlvbi55ID0geTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmFuZG9taXplQXJyb3dUeXBlKCkge1xyXG4gICAgICAgIHZhciB0eXBlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCk7XHJcbiAgICAgICAgdGhpcy5zZXRBcnJvd1R5cGUodHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEFycm93VHlwZSh2YWx1ZSA6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh2YWx1ZSA8IDAgfHwgdmFsdWUgPiAzKSB7IHJldHVybjsgfSAvLyBUT0RPOiBFcnJvciByZXBvcnRpbmdcclxuICAgICAgICB0aGlzLmFycm93VHlwZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuYXJyb3dTcHJpdGUudGV4dHVyZSA9IFRpbGUuYXJyb3dUZXh0dXJlc1t2YWx1ZV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldE5laWdoYm9yKGluZGV4IDogbnVtYmVyLCBuZWlnaGJvciA6IFRpbGUpIHtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gMykgeyByZXR1cm47IH0gLy8gVE9ETzogRXJyb3IgcmVwb3J0aW5nXHJcbiAgICAgICAgdGhpcy5uZWlnaGJvcnNbaW5kZXhdID0gbmVpZ2hib3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEhhc0NvaW5NZW1vcnkodmFsdWUgOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5oYXNDb2luTWVtb3J5ID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5jb2luTWVtb3J5U3ByaXRlLnZpc2libGUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGF0ZVxyXG4gICAgcHJpdmF0ZSB4IDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB5IDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBhcnJvd1R5cGUgOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG5laWdoYm9ycyA6IEFycmF5PFRpbGU+O1xyXG4gICAgcHJpdmF0ZSBoYXNDb2luTWVtb3J5IDogYm9vbGVhbjtcclxuICAgIC8vIE1lZGlhXHJcbiAgICBwcml2YXRlIHRpbGVTcHJpdGUgOiBQSVhJLlNwcml0ZTtcclxuICAgIHByaXZhdGUgYXJyb3dTcHJpdGUgOiBQSVhJLlNwcml0ZTtcclxuICAgIHByaXZhdGUgY29pbk1lbW9yeVNwcml0ZSA6IFBJWEkuU3ByaXRlO1xyXG4gICAgLy8gU3RhdGljXHJcbiAgICBzdGF0aWMgYXJyb3dUZXh0dXJlcyA6IEFycmF5PFBJWEkuVGV4dHVyZT47XHJcbn1cclxuIiwiXHJcbmNvbnN0IEhFTFBfT0ZGU0VUX1ggPSAxMDtcclxuY29uc3QgSEVMUF9PRkZTRVRfWSA9IDEwO1xyXG5jb25zdCBCT0FSRF9QT1NJVElPTl9YID0gMTA7XHJcbmNvbnN0IEJPQVJEX1BPU0lUSU9OX1kgPSA3MDtcclxuY29uc3QgQk9BUkRfSU5JVElBTF9TSVpFID0gMTA7XHJcbmNvbnN0IEZSQU1FX1NQRUVEID0gMTAwO1xyXG5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvaW5kZXguZC50c1wiIC8+XHJcbmltcG9ydCBQSVhJID0gcmVxdWlyZSgncGl4aS5qcycpO1xyXG4vL2ltcG9ydCBhdWRpbyA9IHJlcXVpcmUoJ3BpeGktc291bmQnKTtcclxuaW1wb3J0IHsgQm9hcmQgfSBmcm9tIFwiLi9jbGFzc19ib2FyZFwiO1xyXG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4vY2xhc3NfdGlsZVwiO1xyXG5cclxuLy8gZ2xvYmFsIHZhcnNcclxuICAgIC8vIHN5c3RlbVxyXG4gICAgY29uc3QgcmVuZGVyZXI6UElYSS5XZWJHTFJlbmRlcmVyID0gbmV3IFBJWEkuV2ViR0xSZW5kZXJlcigzMDAwLCAzMDAwKTtcclxuICAgIGNvbnN0IHN0YWdlOlBJWEkuQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcbiAgICAvLyBnYW1lIGNvbnN0YW50c1xyXG4gICAgY29uc3QgY29pbkFuaW1hdGlvbkZyYW1lcyA9IFtbMCwzLDQsMF0sWzAsMSwyLDBdLFswLDQsMywwXSxbMCwyLDEsMF1dO1xyXG4gICAgLy8gZ2FtZSByZXNvdXJjZXNcclxuICAgIGxldCByZXNvdXJjZXM6YW55O1xyXG4gICAgdmFyIGZvbnRTdHlsZTtcclxuICAgIHZhciBleHBsb3Npb25UZXh0dXJlcztcclxuICAgIHZhciBjb2luVGV4dHVyZXM7XHJcbiAgICB2YXIgaGVscFRleHQ7XHJcbiAgICAvLyBnYW1lIHN0YXRlXHJcbiAgICB2YXIgYm9hcmQ7XHJcbiAgICB2YXIgY29pbjtcclxuICAgIHZhciBleHBsb3Npb247XHJcbiAgICB2YXIgZnJhbWVUaW1lID0gMDtcclxuXHJcbmZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XHJcbiAgICAvLyBTeXN0ZW1cclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIudmlldyk7XHJcbiAgICAvLyBUZXh0dXJlc1xyXG4gICAgUElYSS5sb2FkZXJcclxuICAgICAgICAuYWRkKCd0aWxlXzAnLCAnaW1hZ2VzL3RpbGVfYmx1ZS5wbmcnKVxyXG4gICAgICAgIC5hZGQoJ3RpbGVfMScsICdpbWFnZXMvdGlsZV9ncmVlbi5wbmcnKVxyXG4gICAgICAgIC5hZGQoJ2Fycm93X3VwJywgJ2ltYWdlcy9hcnJvd191cC5wbmcnKVxyXG4gICAgICAgIC5hZGQoJ2Fycm93X3JpZ2h0JywgJ2ltYWdlcy9hcnJvd19yaWdodC5wbmcnKVxyXG4gICAgICAgIC5hZGQoJ2Fycm93X2Rvd24nLCAnaW1hZ2VzL2Fycm93X2Rvd24ucG5nJylcclxuICAgICAgICAuYWRkKCdhcnJvd19sZWZ0JywgJ2ltYWdlcy9hcnJvd19sZWZ0LnBuZycpXHJcbiAgICAgICAgLmFkZCgnZXhwbG9zaW9uXzEnLCAnaW1hZ2VzL2V4cGxvc2lvbl8xLnBuZycpXHJcbiAgICAgICAgLmFkZCgnZXhwbG9zaW9uXzInLCAnaW1hZ2VzL2V4cGxvc2lvbl8yLnBuZycpXHJcbiAgICAgICAgLmFkZCgnZXhwbG9zaW9uXzMnLCAnaW1hZ2VzL2V4cGxvc2lvbl8zLnBuZycpXHJcbiAgICAgICAgLmFkZCgnZXhwbG9zaW9uXzQnLCAnaW1hZ2VzL2V4cGxvc2lvbl80LnBuZycpXHJcbiAgICAgICAgLmFkZCgnZXhwbG9zaW9uXzUnLCAnaW1hZ2VzL2V4cGxvc2lvbl81LnBuZycpXHJcbiAgICAgICAgLmFkZCgnY29pbicsICAgICdpbWFnZXMvY29pbi5wbmcnKVxyXG4gICAgICAgIC5hZGQoJ2NvaW5faG9yaXpvbnRhbDEnLCAgICAnaW1hZ2VzL2NvaW5faG9yaXpvbnRhbDEucG5nJylcclxuICAgICAgICAuYWRkKCdjb2luX2hvcml6b250YWwyJywgICAgJ2ltYWdlcy9jb2luX2hvcml6b250YWwyLnBuZycpXHJcbiAgICAgICAgLmFkZCgnY29pbl92ZXJ0aWNhbDEnLCAgICAnaW1hZ2VzL2NvaW5fdmVydGljYWwxLnBuZycpXHJcbiAgICAgICAgLmFkZCgnY29pbl92ZXJ0aWNhbDInLCAgICAnaW1hZ2VzL2NvaW5fdmVydGljYWwyLnBuZycpXHJcbiAgICAgICAgLmxvYWQoZnVuY3Rpb24gKGxvYWRlcjpQSVhJLmxvYWRlcnMuTG9hZGVyLCBuZXdSZXNvdXJjZXM6YW55KSB7XHJcbiAgICAgICAgICAgIHJlc291cmNlcyA9IG5ld1Jlc291cmNlcztcclxuICAgICAgICAgICAgc2V0dXBUZXh0dXJlUmVzb3VyY2VzKCk7XHJcbiAgICAgICAgICAgIHNldHVwVWkoKTtcclxuICAgICAgICAgICAgc2V0dXBCb2FyZCgpO1xyXG4gICAgICAgICAgICBzZXR1cENvaW5BbmRFeHBsb3Npb24oKTtcclxuICAgICAgICAgICAgcnVuTWFpbkxvb3AoMCk7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldHVwVGV4dHVyZVJlc291cmNlcygpIHtcclxuICAgIGV4cGxvc2lvblRleHR1cmVzID0gW107XHJcbiAgICBleHBsb3Npb25UZXh0dXJlc1swXSA9IHJlc291cmNlcy5leHBsb3Npb25fMS50ZXh0dXJlO1xyXG4gICAgZXhwbG9zaW9uVGV4dHVyZXNbMV0gPSByZXNvdXJjZXMuZXhwbG9zaW9uXzIudGV4dHVyZTtcclxuICAgIGV4cGxvc2lvblRleHR1cmVzWzJdID0gcmVzb3VyY2VzLmV4cGxvc2lvbl8zLnRleHR1cmU7XHJcbiAgICBleHBsb3Npb25UZXh0dXJlc1szXSA9IHJlc291cmNlcy5leHBsb3Npb25fNC50ZXh0dXJlO1xyXG4gICAgZXhwbG9zaW9uVGV4dHVyZXNbNF0gPSByZXNvdXJjZXMuZXhwbG9zaW9uXzUudGV4dHVyZTtcclxuICAgIGNvaW5UZXh0dXJlcyA9IFtdO1xyXG4gICAgY29pblRleHR1cmVzWzBdID0gcmVzb3VyY2VzLmNvaW4udGV4dHVyZTtcclxuICAgIGNvaW5UZXh0dXJlc1sxXSA9IHJlc291cmNlcy5jb2luX2hvcml6b250YWwxLnRleHR1cmU7XHJcbiAgICBjb2luVGV4dHVyZXNbMl0gPSByZXNvdXJjZXMuY29pbl9ob3Jpem9udGFsMi50ZXh0dXJlO1xyXG4gICAgY29pblRleHR1cmVzWzNdID0gcmVzb3VyY2VzLmNvaW5fdmVydGljYWwxLnRleHR1cmU7XHJcbiAgICBjb2luVGV4dHVyZXNbNF0gPSByZXNvdXJjZXMuY29pbl92ZXJ0aWNhbDIudGV4dHVyZTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0dXBVaSgpIHtcclxuICAgIC8vIFNldHVwIHN0eWxlXHJcbiAgICBmb250U3R5bGUgPSBuZXcgUElYSS5UZXh0U3R5bGUoe1xyXG4gICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgZm9udFNpemU6IDIwLFxyXG4gICAgICAgIGZpbGw6ICd3aGl0ZScsXHJcbiAgICB9KTtcclxuICAgIC8vIFNldHVwIGhlbHAgdGV4dFxyXG4gICAgaGVscFRleHQgPSBuZXcgUElYSS5UZXh0KFwiQ2xpY2sgb24gYSB0aWxlIHRvIGRyb3AgYSBjb2luLlxcblNlZSBxdWlja2x5IHlvdSBjYW4gZmluZCB0aGUgcGF0aHMgb2ZmIG9mIHRoZSBib2FyZC5cIiwgZm9udFN0eWxlKTtcclxuICAgIGhlbHBUZXh0LnggPSBIRUxQX09GRlNFVF9YO1xyXG4gICAgaGVscFRleHQueSA9IEhFTFBfT0ZGU0VUX1k7XHJcbiAgICBzdGFnZS5hZGRDaGlsZChoZWxwVGV4dCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldHVwQm9hcmQoKSB7XHJcbiAgICBib2FyZCA9IG5ldyBCb2FyZChcclxuICAgICAgICAgICAgcmVzb3VyY2VzLCBzdGFnZSwgb25Cb2FyZENsaWNrLFxyXG4gICAgICAgICAgICBCT0FSRF9JTklUSUFMX1NJWkUsIEJPQVJEX1BPU0lUSU9OX1gsIEJPQVJEX1BPU0lUSU9OX1kpO1xyXG4gICAgYm9hcmQucmFuZG9taXplKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldHVwQ29pbkFuZEV4cGxvc2lvbigpIHtcclxuICAgIGNvaW4gPSBuZXcgUElYSS5TcHJpdGUocmVzb3VyY2VzLmNvaW4udGV4dHVyZSk7XHJcbiAgICBjb2luLmZyYW1lID0gLTE7XHJcbiAgICBjb2luLnZpc2libGUgPSBmYWxzZTtcclxuICAgIHN0YWdlLmFkZENoaWxkKGNvaW4pO1xyXG4gICAgZXhwbG9zaW9uID0gbmV3IFBJWEkuU3ByaXRlKGV4cGxvc2lvblRleHR1cmVzWzBdKTtcclxuICAgIGV4cGxvc2lvbi5mcmFtZSA9IC0xO1xyXG4gICAgZXhwbG9zaW9uLnZpc2libGUgPSBmYWxzZTtcclxuICAgIHN0YWdlLmFkZENoaWxkKGV4cGxvc2lvbik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQm9hcmRDbGljayhldmVudCkge1xyXG4gICAgdmFyIHRpbGUgPSBldmVudC50YXJnZXQudGlsZTtcclxuICAgIC8vIHJlbW92ZSB0aGUgZXhwbG9zaW9uIChpZiBzdGlsbCB2aXNpYmxlKVxyXG4gICAgZXhwbG9zaW9uLnZpc2libGUgPSBmYWxzZTtcclxuICAgIC8vIHBsYWNlIHRoZSBjb2luXHJcbiAgICBjb2luLnRpbGUgPSB0aWxlOyBcclxuICAgIGNvaW4ucG9zaXRpb24ueCA9IHRpbGUuZ2V0WCgpO1xyXG4gICAgY29pbi5wb3NpdGlvbi55ID0gdGlsZS5nZXRZKCk7XHJcbiAgICBjb2luLmRpcmVjdGlvbiA9IHRpbGUuZ2V0QXJyb3dUeXBlKCk7XHJcbiAgICBjb2luLnZpc2libGUgPSB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBydW5GcmFtZUxvZ2ljKCkge1xyXG4gICAgLy8gYW5pbWF0ZSBjb2luXHJcbiAgICBpZiAoY29pbi52aXNpYmxlKSB7XHJcbiAgICAgIGNvaW4uZnJhbWUgKz0gMTtcclxuICAgICAgaWYgKGNvaW4uZnJhbWUgPiAzKSB7IGNvaW4uZnJhbWUgPSAwOyB9XHJcbiAgICAgIGNvaW4udGV4dHVyZSA9IGNvaW5UZXh0dXJlc1tjb2luQW5pbWF0aW9uRnJhbWVzW2NvaW4uZGlyZWN0aW9uXVtjb2luLmZyYW1lXV07XHJcbiAgICB9XHJcbiAgICAvLyBoYW5kbGUgY29pbiBtb3ZlbWVudFxyXG4gICAgaWYgKGNvaW4udmlzaWJsZSAmJiBjb2luLmZyYW1lID09IDIgJiYgIWV4cGxvc2lvbi52aXNpYmxlKSB7XHJcbiAgICAgICAgdmFyIHRpbGUgPSBjb2luLnRpbGU7XHJcbiAgICAgICAgLy8gYWRkIHRvIGNvaW4gdHJhaWxcclxuICAgICAgICAgIGNvaW4udGlsZS5zZXRIYXNDb2luTWVtb3J5KHRydWUpO1xyXG4gICAgICAgIC8vIEdldCBuZXcgcG9zaXRpb25cclxuICAgICAgICB2YXIgbmV3VGlsZSA9IHRpbGUuZ2V0UG9pbnRlZE5laWdoYm9yKCk7XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIHRyYWlsIGxvb3BcclxuICAgICAgICBpZiAobmV3VGlsZSAhPSBudWxsICYmIG5ld1RpbGUuZ2V0SGFzQ29pbk1lbW9yeSgpKSB7XHJcbiAgICAgICAgICAgIGV4cGxvc2lvbi52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGNvaW4gKGlmIGFwcGxpY2FibGUpXHJcbiAgICAgICAgaWYgKCFuZXdUaWxlIHx8IGV4cGxvc2lvbi52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIGJvYXJkLmNsZWFyQ29pbk1lbW9yeSgpO1xyXG4gICAgICAgICAgICBpZiAoIWV4cGxvc2lvbi52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb2luLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNvaW4uZnJhbWUgPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vIG1vdmUgY29pblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvaW4udGlsZSA9IG5ld1RpbGU7XHJcbiAgICAgICAgICAgIGNvaW4ucG9zaXRpb24ueCA9IG5ld1RpbGUuZ2V0WCgpO1xyXG4gICAgICAgICAgICBjb2luLnBvc2l0aW9uLnkgPSBuZXdUaWxlLmdldFkoKTtcclxuICAgICAgICAgICAgY29pbi5kaXJlY3Rpb24gPSBuZXdUaWxlLmdldEFycm93VHlwZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGFuaW1hdGUgZXhwbG9zaW9uXHJcbiAgICBpZiAoZXhwbG9zaW9uLnZpc2libGUpIHtcclxuICAgICAgICArK2V4cGxvc2lvbi5mcmFtZTtcclxuICAgICAgICAvLyBzcGVjaWFsIGZyYW1lc1xyXG4gICAgICAgIGlmIChleHBsb3Npb24uZnJhbWUgPT0gMCkge1xyXG4gICAgICAgICAgZXhwbG9zaW9uLnBvc2l0aW9uID0gY29pbi5wb3NpdGlvbjtcclxuICAgICAgICB9IGVsc2UgaWYgKGV4cGxvc2lvbi5mcmFtZSA9PSAxKSB7XHJcbiAgICAgICAgICBjb2luLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgIGNvaW4uZnJhbWUgPSAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRHJhdyBvciByZW1vdmVcclxuICAgICAgICBpZiAoZXhwbG9zaW9uLmZyYW1lID09IDUpIHtcclxuICAgICAgICAgICAgZXhwbG9zaW9uLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgZXhwbG9zaW9uLmZyYW1lID0gLTE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXhwbG9zaW9uLnRleHR1cmUgPSBleHBsb3Npb25UZXh0dXJlc1tleHBsb3Npb24uZnJhbWVdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcnVuTWFpbkxvb3AodGltZVN0YW1wKSB7XHJcbiAgICAvLyBjYWxsIFwicnVuRnJhbWVMb2dpYygpXCIgYXQgRlJBTUVfU1BFRUQgaW50ZXJ2YWxzXHJcbiAgICBpZiAodGltZVN0YW1wLWZyYW1lVGltZSA+IEZSQU1FX1NQRUVEKSB7XHJcbiAgICAgICAgZnJhbWVUaW1lID0gdGltZVN0YW1wO1xyXG4gICAgICAgIHJ1bkZyYW1lTG9naWMoKTtcclxuICAgIH1cclxuICAgIC8vIFJlbmRlciBhbmQgbG9vcFxyXG4gICAgcmVuZGVyZXIucmVuZGVyKHN0YWdlKTtcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShydW5NYWluTG9vcCk7XHJcbn1cclxuXHJcbmluaXRpYWxpemUoKTtcclxuIl19
